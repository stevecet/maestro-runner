## Verify as a Smobilpay Agent, I can do a cashin via MTN successfully
appId: com.smobilpayagentapp
onFlowStart:
  - runFlow: ../../subflows/restart_app.yaml
---
- runScript: ../../data/cashin/data.js
- tapOn: "Search"
- tapOn:
    id: "icon-button"
    index: 0
- tapOn:
    id: "search-bar"
- inputText: ${output.cashin_data.searchMTNCashin}
- back
- tapOn:
    id: "ServiceItem-MTN MoMo Cash in / DÃ©pÃ´t"
- tapOn: 
    id: "AmountFormServiceNumber"
- inputText: ${output.cashin_data.mtnServiceNumber}
- tapOn:
    id: "AmountFormAmount"
- inputText: ${output.cashin_data.cashinAmount}
- back
- tapOn:
    id: "AmountFormSubmit"
- extendedWaitUntil:
    visible: ${output.cashin_data.transactionDetails}
    timeout: 10000
- scroll
## assert if the amount and the total are equal
- assertVisible:
    text: "${output.cashin_data.displayedAmount} XAF"
    index: 0
- assertVisible:
    text: "${output.cashin_data.mtnTotalAmount} XAF"
    index: 1
- tapOn:
    id: "CollectionPreviewConfirmButton"
## assert successful transaction
- assertVisible: "Collection Details"
- assertVisible: "Success"
- assertVisible: "${output.cashin_data.orangeServiceNumber}"
- assertVisible: "${output.cashin_data.displayedAmount} XAF"